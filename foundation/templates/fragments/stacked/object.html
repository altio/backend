{% load i18n static %}
<h2>
  <span>{{ view.get_title | capfirst }}</span>
  {% block object-actions-header %}
    <span>
    {% if not view.edit %}
      {% ifpermission 'edit' %}&nbsp;<a href="{% mode_url 'edit' %}">{% trans 'Edit' %}</a>{% endifpermission %}
      {% ifpermission 'delete' %}&nbsp;<a href="{% mode_url 'delete' %}">{% trans 'Delete' %}</a>{% endifpermission %}
    {% endif %}
    </span>
  {% endblock object-actions-header %}
</h2>

{% block before-object %}{% endblock %}

{% block object %}
  <!-- <form action="{{ app_path }}" method="post">  -->
  <form {% if has_file_field %}enctype="multipart/form-data" {% endif %}action="{{ form_url }}" method="post" id="{{ view.model_name }}_form" novalidate>{% csrf_token %}{% block form_top %}{% endblock %}
    {% block form %}
    {% for fieldset in form.fieldsets.values %}
      {% include fieldset.template|default:"fragments/stacked/fieldset.html" %}
    {% endfor %}
    {% endblock %}

    {% block object-actions-after %}
    {% if view.edit %}
    <p>
      <button type="submit">{% trans 'Save ' %}{{ view.verbose_name|title }}</button>
      &nbsp;<a href="javascript:history.back()">{% trans 'Cancel' %}</a>
      {% if object.pk %}{% ifpermission 'delete' %}
        &nbsp;<a href="{% mode_url 'delete' %}">{% trans 'Delete this ' %}{{ view.verbose_name|title }}</a>
      {% endifpermission %}{% endif %}
    </p>
    {% endif %}
    {% endblock object-actions-after %}
  </form>
{% endblock object %}

{% block after-object %}{% endblock %}
